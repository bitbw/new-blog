---
title: é˜¿é‡Œäº‘å¸¸è§é—®é¢˜æ±‡æ€»
date: 2021-12-07T17:14:41.000Z
tags:
  - Linux
  - é˜¿é‡Œäº‘
categories: Linux
hash: 9b998d67fa834c8f35d2ef60694ae9357de89c28098b02ca96c3d78a964c66a3
cnblogs:
  postid: '15766404'
---

## nginx è€æ˜¯è‡ªåŠ¨åœæ­¢

nginx åœ¨é€šè¿‡ Certbot å®‰è£… è¯ä¹¦å å‘ç°æ¯éš”ä¸€æ®µæ—¶é—´ nginx éƒ½ä¼šè‡ªåŠ¨åœæ­¢

æ‰¾äº†æˆ‘ n ä¹… ï¼Œä¸€å¼€å§‹ä»¥ä¸ºæ˜¯ shell çš„é—®é¢˜ ï¼Œä»¥ä¸º shell ç«¯å£æœåŠ¡å°±åœï¼Œè¯•äº†å‡ å›å‘ç°ä¸æ˜¯

æŸ¥çœ‹å®šæ—¶ä»»åŠ¡ cat /etc/crontab

```
0 1 * * * root sh /etc/newinit.sh >/dev/null 2>&1
```

ğŸ’¢ /etc/newinit.sh æ˜¯ TMD ä»€ä¹ˆè„šæœ¬
åœ¨ç™¾åº¦ä¸Šä¸€æŸ¥å±…ç„¶æ˜¯æŒ–çŸ¿è„šæœ¬æ”»å‡»ï¼ï¼ï¼ï¼

åŸæ–‡è¿æ¥ï¼š[é˜¿é‡Œäº‘æœåŠ¡å™¨ç³ŸæŒ–çŸ¿ç¨‹åºæ”»å‡»](https://blog.csdn.net/HoneyYHQ9988/article/details/113705159)

è„šæœ¬ä¸­æœ‰æ®µè¿™ä¸ª

```sh
netstat -anp | grep :443 | awk '{print $7}' | awk -F'[/]' '{print $1}' | grep -v "-" | xargs -I % kill -9 %
netstat -anp | grep :23 | awk '{print $7}' | awk -F'[/]' '{print $1}' | grep -v "-" | xargs -I % kill -9 %
netstat -anp | grep :443 | awk '{print $7}' | awk -F'[/]' '{print $1}' | grep -v "-" | xargs -I % kill -9 %
```

å±…ç„¶ æŠŠæˆ‘ 443 ç«¯å£å¯¹åº”çš„è¿›ç¨‹ kill æ‰äº† ï¼Œæˆ‘\*\*\* !!!!ğŸ’¢

è§£å†³ï¼šä¸€å®šè¦æŠŠè„šæœ¬å¹²æ‰ rm -rf /etc/newinit.sh åŒæ—¶å»é™¤/etc/crontab çš„å®šæ—¶ä»»åŠ¡
å†æ¬¡ netstat -tnlp ï¼Œä¸–ç•Œæ¸…å‡€äº†

```bash
Active Internet connections (only servers)
Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name
tcp        0      0 0.0.0.0:80              0.0.0.0:*               LISTEN      396237/nginx: worke
tcp        0      0 127.0.0.53:53           0.0.0.0:*               LISTEN      423/systemd-resolve
tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      545/sshd: /usr/sbin
tcp        0      0 127.0.0.1:33305         0.0.0.0:*               LISTEN      665587/node
tcp        0      0 0.0.0.0:443             0.0.0.0:*               LISTEN      396237/nginx: worke
tcp6       0      0 :::3000                 :::*                    LISTEN      2300247/node /root/
tcp6       0      0 :::3001                 :::*                    LISTEN      2365081/node /root/
```

æ‰¾äº† æˆ‘å¥½é•¿æ—¶é—´ï¼ï¼ï¼ä¸€å®šè¦è®°å½•ä¸€ä¸‹
